(function(n,t){n.fn.customModalForm=function(){var tt=this,s=n("<div class='loader-wrapper'><div id='loadingOverlay'><\/div><\/div>"),i,r,o,u,p,f,w,k,d,g,nt;n("body").append(s);i=n("<div class='modal fade in modal-form' role='dialog'>                                <div class='modal-dialog'>                                    <div class='modal-content'>                                        <div class='modal-header'>                                            <button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;<\/button>                                            <h4 class='modal-title'>&nbsp;<\/h4>                                        <\/div>                                        <div class='modal-body'>                                            <div class='modalContent'><\/div>                                        <\/div>                                    <\/div>                                <\/div>                            <\/div>");n("body").append(i);typeof this.attr("data-modal-title")!="undefined"&&i.find("h4.modal-title").html(n(this).data("modalTitle"));typeof this.attr("data-no-header")!="undefined"&&this.attr("data-no-header")==="true"&&i.find(".modal-header").remove();r=i.find(".modalContent");typeof this.attr("data-modal-size")!="undefined"&&i.find(".modal-dialog").addClass(n(this).data("modalSize"));var h=!1,e=!0,c=!1,l=!1,b=!1,a=!1,v=!1,y=!1;typeof this.attr("data-modal-delete")!="undefined"&&(c=!0);o=c?n(this.attr("data-modal-delete")):null;typeof this.attr("data-modal-no-animation")!="undefined"&&(e=!1);typeof this.attr("data-modal-update")!="undefined"&&(l=!0);typeof this.attr("data-modal-highlight")!="undefined"&&(b=!0);typeof this.attr("data-hook-beforeunload")!="undefined"&&(h=this.attr("data-hook-beforeunload")==="true");u=null;l&&(p=this.attr("data-modal-update"),u=p.indexOf("$")===0?eval(p):n(this.attr("data-modal-update")));f=null;b&&(w=this.attr("data-modal-highlight"),f=w.indexOf("$")===0?eval(w):n(this.attr("data-modal-highlight")));typeof this.attr("data-modal-prepend")!="undefined"&&(a=!0);k=a?n(this.attr("data-modal-prepend")):null;typeof this.attr("data-modal-append")!="undefined"&&(v=!0);d=v?n(this.attr("data-modal-append")):null;typeof this.attr("data-modal-save-message")!="undefined"&&(y=!0);g=this.attr("data-modal-trigger-onsuccess")==="true";nt=y?this.attr("data-modal-save-message"):"";n.ajax({url:this.attr("href"),dataType:"html",type:"GET"}).done(function(u){n.ajaxSetup({cache:!0});r.html(u);n.ajaxSetup({cache:!1});i.on("show.bs.modal",function(){h&&window.addEventListener("beforeunload",window.praPazar.functions.unloadPageEvent);f&&f.addClass("bg-gray disabled")});i.on("hide.bs.modal",function(){h&&window.removeEventListener("beforeunload",window.praPazar.functions.unloadPageEvent);f&&f.removeClass("bg-gray disabled")});i.on("shown.bs.modal",function(){n(this).find("[autofocus]").focus();n(this).scroll(function(){n(this).scrollTop()>=50?n("#return-to-top").fadeIn(200):n("#return-to-top").fadeOut(200)})});i.modal({backdrop:"static",keyboard:!1},"show");i.on("hidden.bs.modal",function(){t.destroy(n(this));n(this).data("bs.modal",null);n(this).remove();n(".modal:visible").length>0&&setTimeout(function(){n(document.body).addClass("modal-open")},0)});n.validator.unobtrusive.parse(r);r.applyTemplateSetup();n("body").find(s).remove()}).fail(function(){n("body").find(s).remove()});i.off("submit","form");i.on("submit","form",function(){var t=n(this).find(":submit"),f,s;return t.prop("disabled",!0),f=t.html(),s=n("<span class='fas fa-sync fa-spin'><\/span>"),t.html(s),n.ajax({url:n(this).attr("action"),dataType:"json",type:"POST",cache:!1,data:n(this).serialize()}).done(function(t){if(t.success){i.modal("hide");g&&n(tt).trigger("onSuccess",t.item);n.each(t.warningMessages,function(n,t){toastr.warning(t)});n.each(t.successMessages,function(n,t){toastr.success(t)});var f;a?(f=n(t.responseText),k.prepend(f),f.applyTemplateSetup(),e&&(f.length>1?f.first().animateInsert():f.animateInsert())):v?(f=n(t.responseText),d.append(f),f.applyTemplateSetup(),e&&(f.length>1?f.first().animateInsert():f.animateInsert())):l?(f=n(t.responseText),u.length>1?(u.slice(1).remove(),u.slice(0,1).replaceWith(f)):u.replaceWith(f),f.applyTemplateSetup(),e&&(f.length>1?f.first().animateUpdate():f.animateUpdate())):c&&e&&(o.length>1?o.first().animateDelete():o.animateDelete());y&&toastr.success(nt)}else r.empty(),r.html(t.responseText),n.validator.unobtrusive.parse(r),r.applyTemplateSetup()}).fail(function(){t.prop("disabled",!1);t.html(f)}),!1})}})(jQuery,kendo);$(function(){$("body").on("click",'a[data-modal-form="true"]',function(n){$(this).customModalForm();n.preventDefault()})});